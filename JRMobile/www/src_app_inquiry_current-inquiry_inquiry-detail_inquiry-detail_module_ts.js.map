{"version":3,"file":"src_app_inquiry_current-inquiry_inquiry-detail_inquiry-detail_module_ts.js","mappings":"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","sources":["./src/app/inquiry/current-inquiry/inquiry-detail/inquiry-detail-routing.module.ts","./src/app/inquiry/current-inquiry/inquiry-detail/inquiry-detail.module.ts","./src/app/inquiry/current-inquiry/inquiry-detail/inquiry-detail.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InquiryDetailPage } from './inquiry-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InquiryDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InquiryDetailPageRoutingModule {}\n","import { HeaderOnScroll } from './../../../directives/header-on-scroll.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { InquiryDetailPageRoutingModule } from './inquiry-detail-routing.module';\nimport { InquiryDetailPage } from './inquiry-detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    InquiryDetailPageRoutingModule,\n    HeaderOnScroll\n  ],\n  declarations: [InquiryDetailPage]\n})\nexport class InquiryDetailPageModule { }\n","import { Subscription } from 'rxjs';\nimport { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { InquiryDetails, InquiryList, InquiryResponse } from 'src/app/models/inquiry.model';\nimport { InquiryService } from 'src/app/service/inquiry/inquiry.service';\nimport { UtilService } from 'src/app/service/util/util.service';\nimport { ToastService } from 'src/app/service/toast/toast.service';\nimport { InquiryStages } from 'src/app/constant/inquiryConstant';\nimport { LocalStorageService } from 'src/app/service/local-storage/localstorage.service';\nimport { currentUser } from 'src/app/models/login.model';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-inquiry-detail',\n  templateUrl: './inquiry-detail.page.html',\n  styleUrls: ['./inquiry-detail.page.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class InquiryDetailPage implements OnInit {\n\n  ownerId: number;\n  role: string;\n  inquirySubscription: Subscription;\n\n  canLoad: boolean = false\n\n  selectedInquiry: InquiryList;\n  selectedInquiryDetails: InquiryDetails;\n  timeline: any[];\n  timelineData: boolean = false;\n  inquiryFeedback: string;\n  inquiryResponse: InquiryResponse;\n\n  constructor(\n    private inquiryService: InquiryService,\n    private utilService: UtilService,\n    private router: Router,\n    private toastService: ToastService,\n    private localStorage: LocalStorageService,\n    private alertController: AlertController\n  ) { }\n\n  async ngOnInit() {\n    let currentUser: currentUser = await this.localStorage.getValue('currentUser');\n    this.ownerId = currentUser.ownerId;\n    this.role = currentUser.role\n\n    this.inquirySubscription = this.utilService\n      .getInquiry()\n      .subscribe((res: any) => {\n        if (res && !res.enquiryId) {\n          this.router.navigate(['/tabs/inquiry/current-inquiry']);\n        }\n        if (res && res.enquiryId) {\n          this.selectedInquiry = res;\n          this.canLoad = true\n          this.getInquiryDetailByInquiryId(this.selectedInquiry.enquiryId);\n        }\n      });\n  }\n\n  async getInquiryDetailByInquiryId(inquiryId: number) {\n    this.selectedInquiryDetails =\n      await this.inquiryService.getInquiryDetailByInquiryId(inquiryId);\n    this.timeline = [\n      {\n        status: 'Inquiry Created On',\n        date: this.selectedInquiryDetails.createdOn,\n        desc: this.selectedInquiryDetails.description,\n      },\n      {\n        status: 'Response By Company',\n        date: this.selectedInquiryDetails.approveRejectDateByAdmin,\n        desc: this.selectedInquiryDetails.jrDesc,\n      },\n      {\n        status: 'Response By Client',\n        date: this.selectedInquiryDetails.approveRejectDateBySiteManager,\n        desc: this.selectedInquiryDetails.clientDesc,\n      },\n      {\n        status: 'Provisioning',\n        date: this.selectedInquiryDetails.provisioningDate,\n        desc: this.selectedInquiryDetails.provisioningDesc,\n      },\n      {\n        status: 'Requirement Collection',\n        date: this.selectedInquiryDetails.requirementDate,\n        desc: this.selectedInquiryDetails.requirementDesc,\n      },\n      {\n        status: 'Installation',\n        date: this.selectedInquiryDetails.installationDate,\n        desc: this.selectedInquiryDetails.installationDesc,\n      },\n      {\n        status: 'Commissioning & Training',\n        date: this.selectedInquiryDetails.commissioningDate,\n        desc: this.selectedInquiryDetails.commissionindDesc,\n      },\n      {\n        status: 'Completed',\n        date: this.selectedInquiryDetails.completedDate,\n        desc: this.selectedInquiryDetails.completedDesc,\n      },\n    ];\n    this.timelineData = true;\n  }\n\n  getInquiryStageName(stage: string): string {\n    return InquiryStages[stage].name;\n  }\n\n  async responseToInquiry(response: string, inquiryId: number) {\n    this.inquiryResponse = {\n      id: inquiryId,\n      status: response,\n      desc: this.inquiryFeedback\n    };\n    try {\n      let response = await this.inquiryService.changeInquiryStatus(this.inquiryResponse);\n      this.toastService.success(response.message);\n      this.inquiryFeedback = '';\n      this.router.navigate(['/tabs/inquiry/current-inquiry']);\n    } catch (error: any) {\n      this.toastService.error(error.error.message);\n    }\n  }\n\n  async holdAlert() {\n    const alert = await this.alertController.create({\n      header: 'Are you sure to Hold Project?',\n      buttons: [\n        {\n          text: 'Close',\n          role: 'cancel',\n          handler: () => { }\n        },\n        {\n          text: 'Confirm',\n          role: 'confirm',\n          cssClass: 'alert-button-confirm-danger',\n          handler: async () => { await this.responseToInquiry('HOLD_BY_CLIENT', this.selectedInquiry.enquiryId) },\n        }\n      ]\n    });\n\n    await alert.present();\n\n  }\n\n  async cancelAlert() {\n    const alert = await this.alertController.create({\n      header: 'Are you sure to Cancel Project?',\n      buttons: [\n        {\n          text: 'Close',\n          role: 'cancel',\n          handler: () => { }\n        },\n        {\n          text: 'Confirm',\n          role: 'confirm',\n          cssClass: 'alert-button-confirm-danger',\n          handler: async () => { await this.responseToInquiry(\"CANCEL_BY_CLIENT\", this.selectedInquiry.enquiryId) },\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  ngOnDestroy() {\n    this.inquirySubscription.unsubscribe();\n  }\n}\n"],"names":["Component","ViewEncapsulation","Router","InquiryService","UtilService","ToastService","InquiryStages","LocalStorageService","AlertController","InquiryDetailPage","constructor","inquiryService","utilService","router","toastService","localStorage","alertController","ngOnInit","currentUser","getValue","ownerId","role","inquirySubscription","getInquiry","subscribe","res","enquiryId","navigate","selectedInquiry","canLoad","getInquiryDetailByInquiryId","inquiryId","selectedInquiryDetails","timeline","status","date","createdOn","desc","description","approveRejectDateByAdmin","jrDesc","approveRejectDateBySiteManager","clientDesc","provisioningDate","provisioningDesc","requirementDate","requirementDesc","installationDate","installationDesc","commissioningDate","commissionindDesc","completedDate","completedDesc","timelineData","getInquiryStageName","stage","name","responseToInquiry","response","inquiryResponse","id","inquiryFeedback","changeInquiryStatus","success","message","error","holdAlert","alert","create","header","buttons","text","handler","cssClass","present","cancelAlert","ngOnDestroy","unsubscribe","selector","template","encapsulation","None"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}