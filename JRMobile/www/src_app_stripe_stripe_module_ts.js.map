{"version":3,"file":"src_app_stripe_stripe_module_ts.js","mappings":"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","sources":["./src/app/stripe/stripe-routing.module.ts","./src/app/stripe/stripe.module.ts","./src/app/stripe/stripe.page.ts","./node_modules/@capacitor-community/stripe/dist/esm/applepay/apple-pay-difinitions.interface.js","./node_modules/@capacitor-community/stripe/dist/esm/applepay/apple-pay-events.enum.js","./node_modules/@capacitor-community/stripe/dist/esm/applepay/index.js","./node_modules/@capacitor-community/stripe/dist/esm/definitions.js","./node_modules/@capacitor-community/stripe/dist/esm/googlepay/google-pay-difinitions.interface.js","./node_modules/@capacitor-community/stripe/dist/esm/googlepay/google-pay-events.enum.js","./node_modules/@capacitor-community/stripe/dist/esm/googlepay/index.js","./node_modules/@capacitor-community/stripe/dist/esm/index.js","./node_modules/@capacitor-community/stripe/dist/esm/paymentflow/index.js","./node_modules/@capacitor-community/stripe/dist/esm/paymentflow/payment-flow-definitions.interface.js","./node_modules/@capacitor-community/stripe/dist/esm/paymentflow/payment-flow-events.enum.js","./node_modules/@capacitor-community/stripe/dist/esm/paymentsheet/index.js","./node_modules/@capacitor-community/stripe/dist/esm/paymentsheet/payment-sheet-definitions.interface.js","./node_modules/@capacitor-community/stripe/dist/esm/paymentsheet/payment-sheet-events.enum.js","./node_modules/@capacitor-community/stripe/dist/esm/shared/index.js","./node_modules/rxjs/dist/esm/internal/lastValueFrom.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StripePage } from './stripe.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StripePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StripePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StripePageRoutingModule } from './stripe-routing.module';\n\nimport { StripePage } from './stripe.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    StripePageRoutingModule\n  ],\n  declarations: [StripePage]\n})\nexport class StripePageModule {}\n","import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { PaymentSheetEventsEnum, Stripe } from '@capacitor-community/stripe'\nimport { first, lastValueFrom } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-stripe',\n  templateUrl: './stripe.page.html',\n  styleUrls: ['./stripe.page.scss'],\n})\nexport class StripePage implements OnInit {\n\n  data: any = {\n    name: 'Group 2',\n    email: 'test@gmail.com',\n    amount: 100,\n    currency: 'CAD'\n  };\n\n  constructor(private http: HttpClient) {\n    Stripe.initialize({\n      publishableKey: 'pk_test_51MfV7mHVw3NF151dqHPNjFCUnrSMpdQHkztbwn7SK6fiTmso1ZbKHKyfhfajadXHJ5zGXeEmYJv3k5eC6GEMYcKc00DfPSqDrX',\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  httpPost(body) {\n    return this.http.post<any>(environment.api + 'payment-sheet', body).pipe(first());\n  }\n\n  async paymentSheet() {\n\n    try {\n      Stripe.addListener(PaymentSheetEventsEnum.Completed, () => {\n        console.log('PaymentSheetEventsEnum.Completed');\n      });\n\n      const data$ = this.httpPost(this.data);\n\n      const { paymentIntent, ephemeralKey, customer } = await lastValueFrom(data$);\n\n      await Stripe.createPaymentSheet({\n        paymentIntentClientSecret: paymentIntent,\n        customerId: customer,\n        customerEphemeralKeySecret: ephemeralKey,\n        merchantDisplayName: 'JR Daycare'\n      })\n\n      const result = await Stripe.presentPaymentSheet();\n      console.log('result: ', result);\n\n      if (result && result.paymentResult === PaymentSheetEventsEnum.Completed) {\n        // Redirect to new\n      };\n    }\n    catch (e) {\n      console.log(e);\n    }\n\n  }\n\n\n}\n","export {};\n","export var ApplePayEventsEnum;\n(function (ApplePayEventsEnum) {\n    ApplePayEventsEnum[\"Loaded\"] = \"applePayLoaded\";\n    ApplePayEventsEnum[\"FailedToLoad\"] = \"applePayFailedToLoad\";\n    ApplePayEventsEnum[\"Completed\"] = \"applePayCompleted\";\n    ApplePayEventsEnum[\"Canceled\"] = \"applePayCanceled\";\n    ApplePayEventsEnum[\"Failed\"] = \"applePayFailed\";\n})(ApplePayEventsEnum || (ApplePayEventsEnum = {}));\n","export * from './apple-pay-events.enum';\nexport * from './apple-pay-difinitions.interface';\n","export * from './applepay/index';\nexport * from './googlepay/index';\nexport * from './paymentflow/index';\nexport * from './paymentsheet/index';\nexport * from './shared/index';\n","export {};\n","export var GooglePayEventsEnum;\n(function (GooglePayEventsEnum) {\n    GooglePayEventsEnum[\"Loaded\"] = \"googlePayLoaded\";\n    GooglePayEventsEnum[\"FailedToLoad\"] = \"googlePayFailedToLoad\";\n    GooglePayEventsEnum[\"Completed\"] = \"googlePayCompleted\";\n    GooglePayEventsEnum[\"Canceled\"] = \"googlePayCanceled\";\n    GooglePayEventsEnum[\"Failed\"] = \"googlePayFailed\";\n})(GooglePayEventsEnum || (GooglePayEventsEnum = {}));\n","export * from './google-pay-events.enum';\nexport * from './google-pay-difinitions.interface';\n","import { registerPlugin } from '@capacitor/core';\nconst Stripe = registerPlugin('Stripe', {\n    web: () => import('./web').then((m) => new m.StripeWeb()),\n});\nexport * from './definitions';\nexport { Stripe };\n","export * from './payment-flow-events.enum';\nexport * from './payment-flow-definitions.interface';\n","export {};\n","export var PaymentFlowEventsEnum;\n(function (PaymentFlowEventsEnum) {\n    PaymentFlowEventsEnum[\"Loaded\"] = \"paymentFlowLoaded\";\n    PaymentFlowEventsEnum[\"FailedToLoad\"] = \"paymentFlowFailedToLoad\";\n    PaymentFlowEventsEnum[\"Opened\"] = \"paymentFlowOpened\";\n    PaymentFlowEventsEnum[\"Created\"] = \"paymentFlowCreated\";\n    PaymentFlowEventsEnum[\"Completed\"] = \"paymentFlowCompleted\";\n    PaymentFlowEventsEnum[\"Canceled\"] = \"paymentFlowCanceled\";\n    PaymentFlowEventsEnum[\"Failed\"] = \"paymentFlowFailed\";\n})(PaymentFlowEventsEnum || (PaymentFlowEventsEnum = {}));\n","export * from './payment-sheet-events.enum';\nexport * from './payment-sheet-definitions.interface';\n","export {};\n","export var PaymentSheetEventsEnum;\n(function (PaymentSheetEventsEnum) {\n    PaymentSheetEventsEnum[\"Loaded\"] = \"paymentSheetLoaded\";\n    PaymentSheetEventsEnum[\"FailedToLoad\"] = \"paymentSheetFailedToLoad\";\n    PaymentSheetEventsEnum[\"Completed\"] = \"paymentSheetCompleted\";\n    PaymentSheetEventsEnum[\"Canceled\"] = \"paymentSheetCanceled\";\n    PaymentSheetEventsEnum[\"Failed\"] = \"paymentSheetFailed\";\n})(PaymentSheetEventsEnum || (PaymentSheetEventsEnum = {}));\n","export {};\n","import { EmptyError } from './util/EmptyError';\nexport function lastValueFrom(source, config) {\n    const hasConfig = typeof config === 'object';\n    return new Promise((resolve, reject) => {\n        let _hasValue = false;\n        let _value;\n        source.subscribe({\n            next: (value) => {\n                _value = value;\n                _hasValue = true;\n            },\n            error: reject,\n            complete: () => {\n                if (_hasValue) {\n                    resolve(_value);\n                }\n                else if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n    });\n}\n"],"names":["HttpClient","Component","PaymentSheetEventsEnum","Stripe","first","lastValueFrom","environment","StripePage","constructor","http","name","email","amount","currency","initialize","publishableKey","ngOnInit","httpPost","body","post","api","pipe","paymentSheet","addListener","Completed","console","log","data$","data","paymentIntent","ephemeralKey","customer","createPaymentSheet","paymentIntentClientSecret","customerId","customerEphemeralKeySecret","merchantDisplayName","result","presentPaymentSheet","paymentResult","e","selector","template","ApplePayEventsEnum","GooglePayEventsEnum","registerPlugin","web","then","m","StripeWeb","PaymentFlowEventsEnum","EmptyError","source","config","hasConfig","Promise","resolve","reject","_hasValue","_value","subscribe","next","value","error","complete","defaultValue"],"sourceRoot":"webpack:///","x_google_ignoreList":[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}