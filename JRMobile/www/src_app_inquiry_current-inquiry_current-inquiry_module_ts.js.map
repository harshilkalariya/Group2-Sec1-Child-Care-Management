{"version":3,"file":"src_app_inquiry_current-inquiry_current-inquiry_module_ts.js","mappings":"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","sources":["./src/app/inquiry/current-inquiry/current-inquiry-routing.module.ts","./src/app/inquiry/current-inquiry/current-inquiry.module.ts","./src/app/inquiry/current-inquiry/current-inquiry.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CurrentInquiryPage } from './current-inquiry.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CurrentInquiryPage\n  },\n  {\n    path: 'inquiry-detail',\n    loadChildren: () => import('./inquiry-detail/inquiry-detail.module').then( m => m.InquiryDetailPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CurrentInquiryPageRoutingModule {}\n","import { HeaderOnScroll } from './../../directives/header-on-scroll.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { CurrentInquiryPageRoutingModule } from './current-inquiry-routing.module';\nimport { CurrentInquiryPage } from './current-inquiry.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CurrentInquiryPageRoutingModule,\n    HeaderOnScroll\n  ],\n  declarations: [CurrentInquiryPage]\n})\nexport class CurrentInquiryPageModule { }\n","import { Subscription } from 'rxjs';\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { IonInfiniteScroll, Platform, NavController, IonContent } from '@ionic/angular';\nimport { InquiryStages } from 'src/app/constant/inquiryConstant';\nimport { InquiryList } from 'src/app/models/inquiry.model';\nimport { InquiryService } from 'src/app/service/inquiry/inquiry.service';\nimport { UtilService } from 'src/app/service/util/util.service';\nimport { currentUser } from 'src/app/models/login.model';\nimport { LocalStorageService } from 'src/app/service/local-storage/localstorage.service';\n\n@Component({\n  selector: 'app-current-inquiry',\n  templateUrl: './current-inquiry.page.html',\n  styleUrls: ['./current-inquiry.page.scss'],\n})\nexport class CurrentInquiryPage implements OnInit {\n\n  ownerId: number;\n  role: string;\n\n  canShowList: boolean = false;\n  globalSearchInput: string = '';\n  pageNumber: number = 1;\n  inquiryList: InquiryList[];\n  allInquiryList: InquiryList[];\n  totalInquiry: number = 0;\n  \n  btnHandler: Subscription;\n\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n  @ViewChild(IonContent, { static: false }) content: IonContent;\n\n  constructor(\n    private inquiryService: InquiryService,\n    private utilService: UtilService,\n    private router: Router,\n    private navCtrl: NavController,\n    private platform: Platform,\n    private localStorage: LocalStorageService,\n  ) { }\n\n  async ngOnInit() {\n    let currentUser: currentUser = await this.localStorage.getValue('currentUser');\n    this.ownerId = currentUser.ownerId\n    this.role = currentUser.role\n   }\n\n  async ionViewWillEnter() {\n    this.content.scrollToTop();\n    this.pageNumber = 1;\n    this.globalSearchInput = '';\n    await this.getCurrentInquiryList();\n    this.allInquiryList = [...this.inquiryList];\n    if (this.infiniteScroll) {\n      this.infiniteScroll.disabled = false;\n    }\n    this.btnHandler = this.platform.backButton.subscribeWithPriority(1, () => {\n      this.navCtrl.navigateBack(\"tabs/inquiry\");\n    });\n  }\n\n  async getCurrentInquiryList() {\n    console.log('ongoing inquiry')\n    let list = await this.inquiryService.getAllInquiryList(this.pageNumber, this.globalSearchInput);\n    this.inquiryList = list.list;\n    this.totalInquiry = list.totalCount;\n    this.canShowList = true;\n  }\n\n  getInquiryStageName(stage: string): string {\n    return InquiryStages[stage].name;\n  }\n\n  async searchCurrentInquiry(event: any) {\n    this.pageNumber = 1;\n    this.globalSearchInput = event.target.value;\n    await this.getCurrentInquiryList();\n    this.allInquiryList = [...this.inquiryList];\n    if (this.totalInquiry > this.pageNumber * 10) {\n      this.infiniteScroll.disabled = false;\n    }\n  }\n\n  async refrashCurrentInquiryList(event: any) {\n    this.pageNumber = 1;\n    this.globalSearchInput = '';\n    try {\n      await this.getCurrentInquiryList();\n      this.allInquiryList = [...this.inquiryList];\n      event.target.complete();\n      if (this.totalInquiry > this.pageNumber * 10) {\n        this.infiniteScroll.disabled = false;\n      }\n    } catch (error) { }\n  }\n\n  async loadMoreCurrentInquiry(event: any) {\n    if (this.totalInquiry <= this.pageNumber * 10) {\n      event.target.disabled = true;\n    }\n    this.pageNumber = this.pageNumber + 1;\n    try {\n      await this.getCurrentInquiryList();\n      this.allInquiryList = [...this.allInquiryList, ...this.inquiryList];\n      if (this.totalInquiry <= this.pageNumber * 10) {\n        event.target.disabled = true;\n      }\n      event.target.complete();\n    } catch (error) { }\n  }\n\n  goToInquiryDetail(inquiry: any) {\n    this.utilService.sendInquiry(inquiry);\n    this.router.navigate(['/tabs/inquiry/current-inquiry/inquiry-detail']);\n  }\n\n  async ionViewDidLeave() {\n    if (this.btnHandler) {\n      this.btnHandler.unsubscribe();\n    }\n  }\n}\n"],"names":["Component","ViewChild","Router","IonInfiniteScroll","Platform","NavController","IonContent","InquiryStages","InquiryService","UtilService","LocalStorageService","CurrentInquiryPage","constructor","inquiryService","utilService","router","navCtrl","platform","localStorage","ngOnInit","currentUser","getValue","ownerId","role","ionViewWillEnter","content","scrollToTop","pageNumber","globalSearchInput","getCurrentInquiryList","allInquiryList","inquiryList","infiniteScroll","disabled","btnHandler","backButton","subscribeWithPriority","navigateBack","console","log","list","getAllInquiryList","totalInquiry","totalCount","canShowList","getInquiryStageName","stage","name","searchCurrentInquiry","event","target","value","refrashCurrentInquiryList","complete","error","loadMoreCurrentInquiry","goToInquiryDetail","inquiry","sendInquiry","navigate","ionViewDidLeave","unsubscribe","args","static","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}